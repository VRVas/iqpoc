@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── Jotia font family — restricted to specific characters ─── */
/* Unicode ranges: A-Z, a-z, 0-3, 5-9 (no 4), colon, semicolon */
@font-face {
  font-family: 'Jotia';
  src: url('/jotia-fonts/jotia-thin.otf') format('opentype');
  font-weight: 100;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0041-005A, U+0061-007A, U+0030-0033, U+0035-0039, U+003A-003B;
}
@font-face {
  font-family: 'Jotia';
  src: url('/jotia-fonts/jotia-light.otf') format('opentype');
  font-weight: 300;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0041-005A, U+0061-007A, U+0030-0033, U+0035-0039, U+003A-003B;
}
@font-face {
  font-family: 'Jotia';
  src: url('/jotia-fonts/jotia-regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0041-005A, U+0061-007A, U+0030-0033, U+0035-0039, U+003A-003B;
}
@font-face {
  font-family: 'Jotia';
  src: url('/jotia-fonts/jotia-medium.otf') format('opentype');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0041-005A, U+0061-007A, U+0030-0033, U+0035-0039, U+003A-003B;
}
@font-face {
  font-family: 'Jotia';
  src: url('/jotia-fonts/jotia-bold.otf') format('opentype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0041-005A, U+0061-007A, U+0030-0033, U+0035-0039, U+003A-003B;
}
@font-face {
  font-family: 'Jotia';
  src: url('/jotia-fonts/jotia-heavy.otf') format('opentype');
  font-weight: 900;
  font-style: normal;
  font-display: swap;
  unicode-range: U+0041-005A, U+0061-007A, U+0030-0033, U+0035-0039, U+003A-003B;
}

@layer base {
  :root {
    color-scheme: light;

    /* ─── Qatar Airways Light Theme ─── */
    /* Surfaces — clean neutrals with subtle warm undertone */
    --color-bg-canvas: 300 3% 97%;
    --color-bg-subtle: 300 3% 95%;
    --color-bg-card: 0 0% 100%;
    --color-bg-elevated: 300 3% 93%;
    --color-bg-hover: 327 6% 93%;
    --color-bg-pressed: 327 10% 88%;

    /* Text — QR grey palette */
    --color-fg-default: 327 15% 12%;
    --color-fg-muted: 202 9% 41%;
    --color-fg-subtle: 202 6% 53%;
    --color-fg-on-accent: 0 0% 100%;

    /* Accent — QR Burgundy #662046 */
    --color-accent-default: 327 52% 26%;
    --color-accent-hover: 327 56% 22%;
    --color-accent-pressed: 327 60% 18%;
    --color-accent-subtle: 327 20% 95%;
    --color-accent-muted: 327 20% 72%;
    --color-accent-glow: 327 45% 40%;
    --color-accent-gradient-from: 327 48% 28%;
    --color-accent-gradient-to: 327 52% 22%;

    /* Strokes */
    --color-stroke-divider: 300 3% 86%;
    --color-stroke-strong: 202 6% 70%;
    --color-stroke-focus: 327 52% 32%;

    /* Status — functional */
    --color-status-success: 158 64% 42%;
    --color-status-warning: 36 92% 50%;
    --color-status-danger: 345 82% 50%;
    --color-status-info: 202 65% 48%;

    /* Overlays */
    --color-overlay-soft: 300 3% 90%;
    --color-overlay-strong: 327 30% 40%;

    /* Glass */
    --color-glass-surface: hsla(0, 0%, 100%, 0.80);
    --color-glass-hover: hsla(327, 6%, 95%, 0.92);
    --color-glass-border: hsla(327, 30%, 50%, 0.25);

    --shadow-color: 327 20% 14%;
    --shadow-glow: 327 45% 40%;
  }

  .dark {
    color-scheme: dark;

    /* ─── Qatar Airways Dark Theme ─── */
    /* Surfaces — deep neutrals with cool undertone */
    --color-bg-canvas: 250 8% 9%;
    --color-bg-subtle: 250 7% 12%;
    --color-bg-card: 250 6% 15%;
    --color-bg-elevated: 250 6% 18%;
    --color-bg-hover: 250 7% 22%;
    --color-bg-pressed: 250 7% 27%;

    /* Text */
    --color-fg-default: 0 0% 93%;
    --color-fg-muted: 210 5% 68%;
    --color-fg-subtle: 210 4% 52%;
    --color-fg-on-accent: 0 0% 100%;

    /* Accent — lightened burgundy for dark backgrounds */
    --color-accent-default: 327 50% 60%;
    --color-accent-hover: 327 52% 55%;
    --color-accent-pressed: 327 54% 48%;
    --color-accent-subtle: 327 20% 16%;
    --color-accent-muted: 327 25% 38%;
    --color-accent-glow: 327 50% 55%;
    --color-accent-gradient-from: 327 48% 52%;
    --color-accent-gradient-to: 327 52% 45%;

    /* Strokes */
    --color-stroke-divider: 250 6% 22%;
    --color-stroke-strong: 250 5% 30%;
    --color-stroke-focus: 327 50% 60%;

    /* Status — functional */
    --color-status-success: 158 64% 52%;
    --color-status-warning: 36 92% 60%;
    --color-status-danger: 345 86% 60%;
    --color-status-info: 202 70% 58%;

    /* Overlays */
    --color-overlay-soft: 250 7% 14%;
    --color-overlay-strong: 327 40% 50%;

    /* Glass */
    --color-glass-surface: hsla(250, 8%, 14%, 0.80);
    --color-glass-hover: hsla(250, 7%, 22%, 0.85);
    --color-glass-border: hsla(327, 50%, 60%, 0.30);

    --shadow-color: 250 10% 5%;
    --shadow-glow: 327 50% 55%;
  }

  * {
    @apply border-stroke-divider;
  }

  html {
    @apply scroll-smooth;
  }

  /* Use the app-level main container for scrolling; prevent document scroll */
  html,
  body,
  #__next {
    height: 100%;
    overflow: hidden !important;
  }

  body {
    @apply bg-bg-canvas text-fg-default font-sans antialiased;
    min-height: 100vh;
    background-color: hsl(var(--color-bg-canvas));
    background-image:
      radial-gradient(circle at 18% 20%, hsl(var(--color-accent-default) / 0.06), transparent 50%);
    background-attachment: fixed;
    font-feature-settings: 'rlig' 1, 'calt' 1;
  }

  .dark body {
    background-image:
      radial-gradient(circle at 15% 15%, hsl(var(--color-accent-default) / 0.10), transparent 50%);
  }

  ::selection {
    background-color: hsl(var(--color-accent-default) / 0.24);
    color: hsl(var(--color-fg-on-accent));
  }

  /* Focus outline */
  *:focus-visible {
    outline: 2px solid hsl(var(--color-stroke-focus));
    outline-offset: 3px;
    box-shadow: 0 0 0 6px hsl(var(--color-stroke-focus) / 0.18);
  }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

@layer components {
  /* Loading spinner with Fluent design */
  .spinner {
    @apply animate-spin rounded-full h-4 w-4 border-2 border-stroke-divider border-t-accent;
  }

  /* Text truncation utility */
  .line-clamp-3 {
    line-clamp: 3;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

@layer utilities {
  /* Glassmorphism helpers */
  .glass-panel {
    background: var(--color-glass-surface);
    border: 1px solid var(--color-glass-border);
    backdrop-filter: blur(20px);
  }

  .glass-panel:hover {
    background: var(--color-glass-hover);
  }

  .focus-ring {
    box-shadow: 0 0 0 3px hsl(var(--color-stroke-focus) / 0.2);
  }

  /* Custom scrollbar styling (applied via .custom-scrollbar) */
  .custom-scrollbar {
    scrollbar-width: thin; /* Firefox */
    scrollbar-color: hsl(var(--color-stroke-divider)) transparent; /* Firefox */
  }

  .dark .custom-scrollbar {
    scrollbar-color: hsl(var(--color-stroke-strong)) transparent;
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: hsl(var(--color-stroke-divider));
    border-radius: 8px;
    border: 2px solid hsl(var(--color-bg-canvas));
    transition: background-color 120ms ease, border-color 120ms ease;
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: hsl(var(--color-stroke-strong));
    border: 2px solid hsl(var(--color-bg-subtle));
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--color-accent-muted));
    border-color: hsl(var(--color-bg-card));
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--color-accent-muted));
    border-color: hsl(var(--color-bg-elevated));
  }

  /* Narrow variant if needed */
  .custom-scrollbar.thin::-webkit-scrollbar {
    width: 6px;
  }

  /* Utility to visually hide scrollbars while preserving scroll behavior */
  .hide-scrollbar {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }
  .hide-scrollbar::-webkit-scrollbar {
    display: none; /* Safari and Chrome */
  }
}